(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){var m=function(a){return a.srcset&&a.sizes}(new Image);a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]};a.expr.pseudos["has-src"]=function(b){return a(b).is('img[src][src!=""]')};a.expr.pseudos.uncached=function(b){return a(b).is(":has-src")?!b.complete:
!1};a.fn.waitForImages=function(){var b=0,h=0,k=a.Deferred(),l=this,c=[],n=a.waitForImages.hasImageProperties||[],p=a.waitForImages.hasImageAttributes||[],q=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(a.isPlainObject(arguments[0])){var f=arguments[0].waitForAll;var g=arguments[0].each;var e=arguments[0].finished}else 1===arguments.length&&"boolean"===a.type(arguments[0])?f=arguments[0]:(e=arguments[0],g=arguments[1],f=arguments[2]);e=e||a.noop;g=g||a.noop;f=!!f;if(!a.isFunction(e)||!a.isFunction(g))throw new TypeError("An invalid callback was supplied.");
this.each(function(){var b=a(this);f?b.find("*").addBack().each(function(){var d=a(this);d.is("img:has-src")&&!d.is("[srcset]")&&c.push({src:d.attr("src"),element:d[0]});a.each(n,function(a,b){a=d.css(b);if(!a)return!0;for(;b=q.exec(a);)c.push({src:b[2],element:d[0]})});a.each(p,function(a,b){if(!d.attr(b))return!0;c.push({src:d.attr("src"),srcset:d.attr("srcset"),element:d[0]})})}):b.find("img:has-src").each(function(){c.push({src:this.src,element:this})})});b=c.length;h=0;0===b&&(e.call(l),k.resolveWith(l));
a.each(c,function(c,d){c=new Image;a(c).one("load.waitForImages error.waitForImages",function r(c){c=[h,b,"load"==c.type];h++;g.apply(d.element,c);k.notifyWith(d.element,c);a(this).off("load.waitForImages error.waitForImages",r);if(h==b)return e.call(l[0]),k.resolveWith(l[0]),!1});m&&d.srcset&&(c.srcset=d.srcset,c.sizes=d.sizes);c.src=d.src});return k.promise()}});